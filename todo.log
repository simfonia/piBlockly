專案說明：
本專案是把我們在BlocklyDuino所開發的積木(@BlocklyDuino_simfonia/*)移植到VS Code的延伸套件中:
1.因為Arduino IDE 2的核心是VS Code所用的核心，
  所以VS Code的延伸套件可以直接在Arduino IDE 2 中執行。
2.在 VS Code中開發這個積木套件，最後打包給Arduino IDE 2用
3.用我們開發的這個積木套件(之後稱為πBlockly)產生Arduino C++程式給Arduino IDE 2的編輯器，
  再借由它的介面直接上傳，也可以直接使用它的其它功能，不用像其它Blockly環境那樣互相切換。
4.將來打算把積木放在github page上，讓這個延伸套件的積木動態載入
5.在 @TextBlockly/中有一份可正常運作專案可供參考，是本計畫模仿的對象。
6.本專案使用的Blockly是 V12.3.1 最新套件

檔案角色說明：
- `media/blockly.js`: 這是核心 Blockly 函式庫。它提供了基礎框架、UI 元件，以及標準 Blockly
積木的定義（例如邏輯、迴圈、數學、文字、列表、變數、函式）。它也包含用於國際化的 `Blockly.Msg`
物件。

- `media/arduino_generator.js`: 這個檔案是標準 Arduino 積木的程式碼生成器。它定義了標準 Arduino
相關積木（例如 `pinMode`、`digitalWrite`、`analogRead`、`analogWrite`）如何轉換為 Arduino C++
程式碼。這個檔案最初是由舊語法的 `arduino_compressed.js`，經過複製和更名，並以新語法重寫而成，未來若要
新增Arduino相關積木，可以參考`arduino_compressed.js`。

- `media/custom/blocks.js`: 這個檔案包含自訂積木（包括 PiCar 特定積木、Coding 積木以及
`initializes_setup`/`initializes_loop` 積木）的定義（外觀和結構）。這些定義被添加到
`Blockly.Blocks` 中。

- `media/custom/custom_generator.js`:
這個檔案包含自訂積木的程式碼生成器。它定義了自訂積木（PiCar、Coding、`initializes_setup`
/`initializes_loop`）如何轉換為 Arduino C++ 程式碼。這個檔案最初是 `simfonia` 中的
`javascript.js`，經過複製和更名。

- `piblockly/work.log` 本專案工作日誌，當我下"記錄工作重點"之類的話時，請以相同格式輸出本次重點，我會自己複製寫入此檔。



To do:
[x] 1. 移植 @BlocklyDuino_simfonia/* 中的積木
[x] 2. 完成介面並可以正常產生程式碼
  [x] 2-1 將piBlockly顯示在右半部
  [x] 2-2 toolbox中列出基本積木
  [x] 2-3 產生程式碼到左方編輯區的動作可以正常運作
[x] 3. 排列toolbox中積木的順序
        Arduino
          Structure: setup, loop
          IO: pin, mode, digitalRead, digitalWrite, analogRead, analogWrite
          Time: delay, delayMicroseconds, millis, micros, 
          Serial: begin, println, print, available, read
        πCar
        Coding
        ----
        Logic
        Loops
        Math
        Text
        ---
        Variables
          local, global
        Functions
[x] 4. 建立piBlockly的啟動按鈕      
[x] 5. 完成所有積木語法產生，工作清單: porting_checklist.md
[x] 6. 處理孤兒積木
[ ] 7. 完善工作流：堅守「.xml 是源頭，.ino 只是產物」的核心原則。
    * 啟動與開檔：
      [x] 啟動piBlockly：點擊ino頁籤上的 πBlockly 按鈕(以下稱pi鈕)，對話框詢問開檔方式及檔名，開新檔或舊檔都是指xml積木檔。
      [x] 檔案開啟後，在系統暫存資料夾建立一個新的暫存 "[隨機數].ino" 檔置於左方面板，右方面板是積木編輯區，左右面板綁定，編輯積木會反應到綁定的ino上。
      [x] 此時pi鈕變暗(或隱藏)失效，不讓使用者開第二個積木編輯視窗，同時只能處理一個積木檔。 
    * 儲存：
      [x] 當使用者在 積木面板 中點擊「儲存積木」時，積木會被自動儲存到指定的 xml 檔案中。
      [x] 當使用者在 積木面板 中點擊「另存積木」時，積木會被另命名存到指定的 xml 檔案中。
      [x] 不要主動對 ino 存檔，由使用者自行決定。
    * 關閉：
      [?] 若偵測到綁定的ino頁被使用者關閉，但此時積木編輯窗未關閉，則不允許關閉ino
      * 若偵測到綁定的積木檔要被關閉：
        [x] 若積木檔不為髒，關閉積木面板及綁定的 ino 面板，此時若畫面有pi鈕，則回到生效狀態，流程重頭來。
        [x] 若積木檔為髒，提醒使用者存檔、不存檔或取消：
          [x] 存檔：存檔後關閉積木面板及綁定的 ino 面板，此時若畫面有pi鈕，則回到生效狀態，流程重頭來。
          [x] 不存檔：關閉積木面板及綁定的 ino 面板，此時若畫面有pi鈕，則回到生效狀態，流程重頭來。
          [x] 取消：取消關閉動作。
    * 面板切換：
      [x] 當被綁定的 `.ino` 程式碼編輯器在畫面上看不見時(例如被其他分頁蓋住，或使用者切換到其他編輯器群組)，piBlockly 的積木編輯區需要加上遮罩。



未來規畫：
[ ] * 第三方積木可以由網頁動態載入
[ ] * 切換積木風格
[ ] * i18n
[ ] * Webview安全性策略問題檢查(allow-scripts and allow-same-origin )
[ ] * 使用VS Code Custom Editor API 打造 webview, 以處理面板關閉事件(https://vscode.com.tw/api/extension-guides/custom-editors)
[ ] * 其它:
  [ ] - piCar 彩蛋旋律一般化
  [x] - 積木大小調整 
  [x] - 積木外觀貼近原始程式語法 
  [?] - 畫面分割成1:2 (VS code 目前不支援API，作罷。)


